# Development Workflow Rules

## Dev Server Management
- When the dev server port is in use, try alternative ports (5176, 5177, etc.)
- Always verify which workspace a running dev server belongs to before assuming changes are visible
- Check the `cwd` (current working directory) of running processes when debugging

## Troubleshooting Steps
- For visual changes not appearing: suggest hard refresh (Cmd+Shift+R / Ctrl+Shift+R)
- Browser caching is a common cause of "changes not visible" issues
- Before concluding a change failed, verify the correct server is running for this workspace

## Communication Patterns
- When making visual/styling changes, explicitly state what changed and the file/line number
- After visual changes, offer to adjust if styling intensity needs tweaking
- Guide users through troubleshooting steps to empower self-resolution

## React Patterns Used in This Codebase
- Conditional rendering: `condition ? (...) : (...)` for show/hide
- NavLink with automatic `.active` class styling for navigation
- NavLink `end` prop: Use on parent routes (e.g., `/dashboard`) to prevent active state on child routes
- useState for toggles: Manage expanded/collapsed states (e.g., `channelsExpanded`, `insightsExpanded`)
- useEffect for data fetching on component mount
- useEffect for side effects: Manage body overflow when mobile nav is open, close mobile nav on route changes
- useLocation for route change triggers: Detect route changes to trigger side effects (e.g., closing mobile nav)
- Array.reduce() for aggregating campaign statistics
- `collapsed` prop propagation: Pass down to child components for consistent collapsed sidebar behavior
- Flexbox for sidebar and navigation layouts
- `overflow-y: auto` for scrollable navigation content
- Dynamic class toggling: Classes like `sidebar-collapsed`, `expanded`, `mobile-open` toggled in `.tsx`, defined in `.css`

## SVG Icon Conventions
- Use inline SVGs for icons (not icon fonts or separate image files)
- Standard attributes: `viewBox`, `fill`, `stroke`, `strokeWidth`, `strokeLinecap`, `strokeLinejoin`
- Add `aria-hidden="true"` on decorative icons
- Common sizes: 16px (small), 20px (medium), 24px (large)

## Sidebar & Mobile Navigation Implementation
- Sidebar collapse: Uses CSS class `.collapsed` toggled by JavaScript state and prop from `MainLayout`
- Mobile navigation: Combines `position: fixed` sidebar (off-screen by default), overlay, and hamburger button in fixed mobile header
- Clicking nav items in mobile drawer should close the drawer

## Mistakes to Avoid
- Initial state defaulting: Set correct initial values for toggles (e.g., `useState(false)` for collapsed-by-default)
- Overly broad active states: Use NavLink `end` prop to avoid unintended highlighting on child routes
- Redundant navigation: Don't create duplicate entry points; keep workflows clear (e.g., Publisher accessed only after generation)
- Hidden overlay click interception: `opacity: 0` does NOT prevent click events. Always add `pointer-events: none` to hidden overlays to prevent them from blocking interactions with elements beneath
- Inconsistent breakpoints: Standardize media query breakpoints across the codebase (900px for tablet, 600px for mobile)

## Git Workflow
- Use descriptive commit messages summarizing actual changes
- `gh pr create` for automated PR creation
- Always check `git status` and `git diff` before committing

## Best Practices for Larger Tasks
- **Phased implementation**: Break responsiveness/layout tasks into phases (Core Layout, Page-Level, Component-Level, Polish)
- **Plan documentation**: Document goals, specific file changes, and verification checklist before coding
- **Test across viewports**: Use Chrome DevTools to test at various breakpoints (desktop, tablet, mobile)

## Component Structure
- Each component should have both a `.tsx` and corresponding `.css` file (e.g., `UserProfileDropdown.tsx` + `UserProfileDropdown.css`)
- Clear component separation promotes modularity: `Sidebar`, `MainLayout`, `ProtectedRoute`, `UserProfileDropdown`, etc.
- Use meaningful class names (e.g., `sidebar-collapsed`, `nav-item-expandable`, `mobile-menu-btn`)

## Demo Stubbing Patterns
- Use `localStorage` for authentication state (`'convertra_authenticated'`, `'convertra_user'`)
- Use `setTimeout` to simulate API calls in `Login.tsx` and `Register.tsx`
- These stubs enable quick demonstrations without a full backend
